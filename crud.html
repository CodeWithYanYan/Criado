<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body class="bg-dark">
    <header class="bg-dark text-light p-3">
        <div class="row m-0">
            <div class="col-4 ">
                <h1 class="fw-bold mb-0">Movie Catalog</h1>
            </div>
            <div class="col-8">
                <div class="d-flex align-items-center justify-content-between h-100">
                    <ul class="d-flex list-unstyled mb-0 justify-content-around w-50 fw-light">
                        <li><a href="" class="text-decoration-none text-light">HOME</a></li>
                        <li><a href="" class="text-decoration-none text-light">ABOUT</a></li>
                        <li><a href="" class="text-decoration-none text-light">MOST POPULAR</a></li>
                        <li><a href="" class="text-decoration-none text-light">NEWS</a></li>
                        <li><a href=""  class="text-decoration-none text-light"> CONTACT</a></li>
                    </ul>
                    <div class="input-group w-50">
                        <input type="text" class="form-control" placeholder="Search movies....">
                        <button class="input-group-item btn btn-secondary"> <i class="bi bi-search"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <nav class="p-1 bg-danger">
        <ul class="list-unstyled m-0 p-1  d-flex fw-bolder align-items-center justify-content-around">
            <li><a href="" class="text-decoration-none text-light fs-5">CINEMA MOVIES</a></li>
            <li><a href="" class="text-decoration-none text-light fs-5">TV SERIES</a></li>
            <li><a href="" class="text-decoration-none text-light fs-5">CARTOONS</a></li>
            <li><a href="" class="text-decoration-none text-light fs-5">ANIME</a></li>
            <li><a href="" class="text-decoration-none text-light fs-5">NEW MOVIES</a></li>
            <li><a href="" class="text-decoration-none text-light fs-5">HD MOVIES</a></li>
        </ul>
    </nav>
    <div class="container-fluid mt-4">
        <table class="table table-border">
            <thead class="table-danger text-center">
                <tr>
                    <th class="fw-light">Title</th>
                    <th class="fw-light">Release Year</th>
                    <th class="fw-light">Duration</th>
                    <th class="fw-light">Language</th>
                    <th class="fw-light">Country</th>
                    <th class="fw-light">Actions</th>
                </tr>
            </thead>
            <tbody id="movie-table-body" class="text-center">
                <!-- Data rows will be dynamically added here -->
            </tbody>
        </table>
    </div>
    
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-dark text-white">
            <h1 class="modal-title fs-5 " id="exampleModalLabel">Update Information</h1>
            <button type="button" class="btn-close text-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                        <!-- Movie Edit Form -->
<div class="container mt-4">
    <form id="edit-movie-form">
                <div class="mb-3">
                    <input type="text" class="form-control" id="title" required>
                </div>
                <div class="mb-3">
                    <label for="year" class="form-label">Release Year</label>
                    <input type="number" class="form-control" id="year" required>
                </div>
                <div class="mb-3">
                    <label for="duration" class="form-label">Duration</label>
                    <input type="text" class="form-control" id="duration" required>
                </div>
                <div class="mb-3">
                    <label for="language" class="form-label">Language</label>
                    <input type="text" class="form-control" id="language" required>
                </div>
                <div class="mb-3">
                    <label for="country" class="form-label">Country</label>
                    <input type="text" class="form-control" id="country" required>
                </div>
                <button type="submit" class="btn btn-danger rounded-pill w-100">Save Changes</button>
            </form>
        </div>
        </div>
        </div>
        </div>
    </div>


    <footer class="px-3 pt-2 text-light position-absolute bottom-0 w-100 border border-top border-light border-1" style="height: 300px;">
        <div>
            <div class="row text-center">
                <div class="col pt-2">
                    <h3 class="text-light fw-light">MOVIE CATALOG</h3>
                </div>
                <div class="col pt-2">
                    <p>WEEBLY THEMES</p>
                    <p>PRE-SALE FAQS</p>
                    <p>SUBMIT A TICKET</p>
                </div>
                <div class="col pt-2">
                    <p>SERVICES</p>
                    <p>THEME TWEAK</p>
                </div>
                <div class="col pt-2">
                        <p>SHOWCASE</p>
                        <p>WIDGET</p>
                        <p>SUPPORT</p>
                </div>
                <div class="col pt-2">
                    <p>ABOUT US</p>
                    <p>CONTACT US</p>
                    <p>AFFILIATE</p>
                    <p>RESOURCES</p>
            </div>
            </div>
            <hr>
            <div class="text-center ">
                <i class="bi bi-facebook fs-3 mx-3"></i>
                <i class="bi bi-youtube fs-3 mx-3"></i>
                <i class="bi bi-instagram fs-3 mx-3"></i>
                <i class="bi bi-google fs-3 mx-3"></i>
                <i class="bi bi-google-play fs-3 mx-3"></i>
            </div>
            <hr>
        </div>
    </footer>
    <script>
            document.addEventListener("DOMContentLoaded", () => {
            const tableBody = document.getElementById("movie-table-body");
            const editMovieForm = document.getElementById("edit-movie-form");
            
            // Load movies from localStorage
            const movies = JSON.parse(localStorage.getItem("movies")) || [];

            // Iterate through movies and create rows for each movie
            movies.forEach((movie) => {
                const row = createTableRow(movie);
                tableBody.appendChild(row);
            });

            // Create a table row
            function createTableRow(movie) {
                const row = document.createElement("tr");

                row.innerHTML = `
                    <td>${movie.title}</td>
                    <td>${movie.year}</td>
                    <td>${movie.duration}</td>
                    <td>${movie.language}</td>
                    <td>${movie.country}</td>
                    <td>
                        <button class="btn edit-btn" data-bs-toggle="modal" data-bs-target="#exampleModal">Edit</button>
                        <button class="btn delete-btn">Delete</button>
                    </td>
                `;

                // Attach event listeners to buttons
                row.querySelector(".delete-btn").addEventListener("click", () => {
                    row.remove();
                    saveMoviesToLocalStorage();
                });

                row.querySelector(".edit-btn").addEventListener("click", () => {
                    editRow(row, movie);
                });

                return row;
            }

            // Edit row function
            function editRow(row, movie) {
                // Fill the form with movie data to allow editing
                document.getElementById("title").value = movie.title;
                document.getElementById("year").value = movie.year;
                document.getElementById("duration").value = movie.duration;
                document.getElementById("language").value = movie.language;
                document.getElementById("country").value = movie.country;

                // When the form is submitted, update the movie in the table and in localStorage
                editMovieForm.onsubmit = function (e) {
                    e.preventDefault();

                    movie.title = document.getElementById("title").value;
                    movie.year = document.getElementById("year").value;
                    movie.duration = document.getElementById("duration").value;
                    movie.language = document.getElementById("language").value;
                    movie.country = document.getElementById("country").value;

                    // Update the row in the table
                    row.cells[0].textContent = movie.title;
                    row.cells[1].textContent = movie.year;
                    row.cells[2].textContent = movie.duration;
                    row.cells[3].textContent = movie.language;
                    row.cells[4].textContent = movie.country;

                    saveMoviesToLocalStorage();
                    editMovieForm.reset(); // Reset the form fields
                };
            }

            // Save movies to Local Storage
            function saveMoviesToLocalStorage() {
                const rows = document.querySelectorAll("#movie-table-body tr");
                const updatedMovies = [];

                rows.forEach((row) => {
                    updatedMovies.push({
                        title: row.cells[0].textContent,
                        year: row.cells[1].textContent,
                        duration: row.cells[2].textContent,
                        language: row.cells[3].textContent,
                        country: row.cells[4].textContent,
                    });
                });

                localStorage.setItem("movies", JSON.stringify(updatedMovies));
            }
        });

    </script>
    <script src="crud.js"></script>

    <!--script for  boostrap-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>